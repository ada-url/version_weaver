TAP version 13
1..2
# Subtest: without env set
    not ok 1 - success exit status
      ---
      found: 1
      wanted: 0
      compare: ===
      at:
        line: 13
        column: 9
        file: build/test/internal/debug.js
        type: ChildProcess
      stack: |
        ChildProcess.<anonymous> (build/test/internal/debug.js:13:9)
      source: |2
            c.on('close', (code, signal) => {
              t.equal(code, 0, 'success exit status')
        --------^
              t.equal(signal, null, 'no signal')
              t.equal(Buffer.concat(err).toString('utf8'), '', 'got no output')
      ...
    
    ok 2 - no signal
    not ok 3 - got no output
      ---
      found: "node:internal/modules/cjs/loader:
      
        \  throw err;
      
        \  ^
      
      
        Error: Cannot find module '../../internal/debug'
      
        Require stack:
      
        -
        /Users/duhamean/Documents/nodejs/version_weaver/napi/build/test/internal/debu\
        g.js
      
        \    at Object.<anonymous>
        \e[90m(/Users/duhamean/Documents/nodejs/version_weaver/napi/\e[39mbuild/test/\
        internal/debug.js:37:3\e[90m)\e[39m {
      
        \  code: \e[32m'MODULE_NOT_FOUND'\e[39m,
      
        \  requireStack: [
      
        \    \e[32m'/Users/duhamean/Documents/nodejs/version_weaver/napi/build/test\
        /internal/debug.js'\e[39m
      
        \  ]
      
        }
      
      
        Node.js v22.14.0\n"
      wanted: ""
      compare: ===
      at:
        line: 15
        column: 9
        file: build/test/internal/debug.js
        type: ChildProcess
      stack: |
        ChildProcess.<anonymous> (build/test/internal/debug.js:15:9)
      source: |2
              t.equal(signal, null, 'no signal')
              t.equal(Buffer.concat(err).toString('utf8'), '', 'got no output')
        --------^
              t.end()
            })
      ...
    
    1..3
    # failed 2 of 3 tests
not ok 1 - without env set 

# Subtest: with env set
    not ok 1 - success exit status
      ---
      found: 1
      wanted: 0
      compare: ===
      at:
        line: 27
        column: 9
        file: build/test/internal/debug.js
        type: ChildProcess
      stack: |
        ChildProcess.<anonymous> (build/test/internal/debug.js:27:9)
      source: >2
            c.on('close', (code, signal) => {
              t.equal(code, 0, 'success exit status')
        --------^
              t.equal(signal, null, 'no signal')
              t.equal(Buffer.concat(err).toString('utf8'), 'SEMVER hello, world\n', 'got expected output')
      ...
    
    ok 2 - no signal
    not ok 3 - got expected output
      ---
      compare: ===
      at:
        line: 29
        column: 9
        file: build/test/internal/debug.js
        type: ChildProcess
      stack: |
        ChildProcess.<anonymous> (build/test/internal/debug.js:29:9)
      source: >2
              t.equal(signal, null, 'no signal')
              t.equal(Buffer.concat(err).toString('utf8'), 'SEMVER hello, world\n', 'got expected output')
        --------^
              t.end()
            })
      diff: "--- expected
      
        +++ actual
      
        @@ -1,2 +1,25 @@
      
        -SEMVER hello, world
      
        +node:internal/modules/cjs/loader:
      
        +  throw err;
      
        +  ^
      
        \\ 
      
        +Error: Cannot find module '../../internal/debug'
      
        +Require stack:
      
        +-
        /Users/duhamean/Documents/nodejs/version_weaver/napi/build/test/internal/debu\
        g.js
      
        +\e[90m    at Function._resolveFilename
        (node:internal/modules/cjs/loader:1225:15)\e[39m
      
        +\e[90m    at Function._load
        (node:internal/modules/cjs/loader:1055:27)\e[39m
      
        +\e[90m    at TracingChannel.traceSync
        (node:diagnostics_channel:322:14)\e[39m
      
        +\e[90m    at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\e[39m
      
        +\e[90m    at Module.require
        (node:internal/modules/cjs/loader:1311:12)\e[39m
      
        +\e[90m    at require (node:internal/modules/helpers:136:16)\e[39m
      
        +    at Object.<anonymous>
        \e[90m(/Users/duhamean/Documents/nodejs/version_weaver/napi/\e[39mbuild/test/\
        internal/debug.js:37:3\e[90m)\e[39m
      
        +\e[90m    at Module._compile
        (node:internal/modules/cjs/loader:1554:14)\e[39m
      
        +\e[90m    at Object..js (node:internal/modules/cjs/loader:1706:10)\e[39m
      
        +\e[90m    at Module.load (node:internal/modules/cjs/loader:1289:32)\e[39m {
      
        +  code: \e[32m'MODULE_NOT_FOUND'\e[39m,
      
        +  requireStack: [
      
        +    \e[32m'/Users/duhamean/Documents/nodejs/version_weaver/napi/build/test\
        /internal/debug.js'\e[39m
      
        +  ]
      
        +}
      
        +
      
        +Node.js x.x.x
      
        +\n"
      ...
    
    1..3
    # failed 2 of 3 tests
not ok 2 - with env set 

# failed 2 of 2 tests

